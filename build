if ! git diff --quiet || ! git diff --cached --quiet; then
  echo "âŒ Can not push, there are uncommitted changes."
  exit 1
fi

clear

echo "ğŸ”¨ Building and uploading the package..."

echo "ğŸ“¦ Bumping version..."
python3 -m bump
echo "ğŸ“¦ Version bumped successfully."
echo "Version: $(cat ./VERSION)"

echo "ğŸ”„ Committing changes to git..."
git add .
git commit -m "version bump"
echo "ğŸ”„ Changes committed successfully."

echo "ğŸ§¹ Cleaning up old build artifacts..."
rm -rf dist/*
echo "ğŸ§¹ Old build artifacts cleaned up."

mv src gsam

echo "ğŸš€ Building the package..."
python3 -m build
twine upload dist/*
echo "ğŸš€ Package built and uploaded successfully."

mv gsam src

clear
echo "âœ… Successfully built and uploaded the package."
